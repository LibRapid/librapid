\hypertarget{function_8hpp_source}{}\doxysection{function.\+hpp}
\label{function_8hpp_source}\index{librapid/include/librapid/array/function.hpp@{librapid/include/librapid/array/function.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef LIBRAPID\_ARRAY\_FUNCTION\_HPP}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define LIBRAPID\_ARRAY\_FUNCTION\_HPP}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{keyword}{namespace }librapid \{}
\DoxyCodeLine{5     \textcolor{keyword}{namespace }typetraits \{}
\DoxyCodeLine{6         \textcolor{keyword}{template}<::librapid::detail::Descriptor desc, \textcolor{keyword}{typename} Functor\_, \textcolor{keyword}{typename}... Args>}
\DoxyCodeLine{7         \textcolor{keyword}{struct }\mbox{\hyperlink{structlibrapid_1_1typetraits_1_1_type_info}{TypeInfo}}<::\mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{librapid::detail::Function}}<desc, Functor\_, Args...>> \{}
\DoxyCodeLine{8             \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{bool} isLibRapidType     = \textcolor{keyword}{true};}
\DoxyCodeLine{9             \textcolor{keyword}{using} Scalar                             = \textcolor{keyword}{decltype}(std::declval<Functor\_>()(}
\DoxyCodeLine{10               std::declval<typename TypeInfo<std::decay\_t<Args>>::Scalar>()...));}
\DoxyCodeLine{11             \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{bool} supportsArithmetic = \mbox{\hyperlink{structlibrapid_1_1typetraits_1_1_type_info}{TypeInfo<Scalar>::supportsArithmetic}};}
\DoxyCodeLine{12             \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{bool} supportsLogical    = \mbox{\hyperlink{structlibrapid_1_1typetraits_1_1_type_info}{TypeInfo<Scalar>::supportsLogical}};}
\DoxyCodeLine{13             \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{bool} supportsBinary     = \mbox{\hyperlink{structlibrapid_1_1typetraits_1_1_type_info}{TypeInfo<Scalar>::supportsBinary}};}
\DoxyCodeLine{14         \};}
\DoxyCodeLine{15     \} \textcolor{comment}{// namespace typetraits}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17     \textcolor{keyword}{namespace }detail \{}
\DoxyCodeLine{18         \textcolor{comment}{// Descriptor is defined in "{}forward.hpp"{}}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20         \textcolor{keyword}{template}<Descriptor desc, \textcolor{keyword}{typename} Functor\_, \textcolor{keyword}{typename}... Args>}
\DoxyCodeLine{21         \textcolor{keyword}{class }\mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}} \{}
\DoxyCodeLine{22         \textcolor{keyword}{public}:}
\DoxyCodeLine{23             \textcolor{keyword}{using} \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Type}}    = \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}}<desc, Functor\_, Args...>;}
\DoxyCodeLine{24             \textcolor{keyword}{using} Functor = Functor\_;}
\DoxyCodeLine{25             \textcolor{keyword}{using} Scalar  = \textcolor{keyword}{typename} typetraits::TypeInfo<Type>::Scalar;}
\DoxyCodeLine{26 }
\DoxyCodeLine{27             \textcolor{keyword}{using} Packet = \textcolor{keyword}{typename} typetraits::TypeInfo<Scalar>::Packet;}
\DoxyCodeLine{28 }
\DoxyCodeLine{29             \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{30 }
\DoxyCodeLine{34             LIBRAPID\_ALWAYS\_INLINE \textcolor{keyword}{explicit} \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}}(Functor \&\&functor, Args \&\&...args);}
\DoxyCodeLine{35 }
\DoxyCodeLine{38             LIBRAPID\_ALWAYS\_INLINE \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function_a57a0edd39c9b2021eaa30e56375777be}{Function}}(\textcolor{keyword}{const} \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}} \&other) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{39 }
\DoxyCodeLine{42             LIBRAPID\_ALWAYS\_INLINE \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function_a4bebb0f281c4d86dbddb1f76bb5089ed}{Function}}(\mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}} \&\&other) \textcolor{keyword}{noexcept} = \textcolor{keywordflow}{default};}
\DoxyCodeLine{43 }
\DoxyCodeLine{47             LIBRAPID\_ALWAYS\_INLINE \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}} \&\mbox{\hyperlink{classlibrapid_1_1detail_1_1_function_ac0eeb297d4b6eb27c1f402e361ee4737}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}} \&other) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{48 }
\DoxyCodeLine{52             LIBRAPID\_ALWAYS\_INLINE \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}} \&\mbox{\hyperlink{classlibrapid_1_1detail_1_1_function_a3bea9389a7f62fe20d4c49f295970047}{operator=}}(\mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}} \&\&other) \textcolor{keyword}{noexcept} = \textcolor{keywordflow}{default};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54             LIBRAPID\_NODISCARD LIBRAPID\_ALWAYS\_INLINE \textcolor{keyword}{auto} shape()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{55                 \textcolor{keywordflow}{return} std::get<0>(m\_args).shape();}
\DoxyCodeLine{56             \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{61             LIBRAPID\_NODISCARD LIBRAPID\_ALWAYS\_INLINE Packet \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function_a8fb5be37c8760e2461877b5b6e5d5298}{packet}}(\textcolor{keywordtype}{size\_t} index) \textcolor{keyword}{const};}
\DoxyCodeLine{62 }
\DoxyCodeLine{66             LIBRAPID\_NODISCARD LIBRAPID\_ALWAYS\_INLINE Scalar \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function_a3930166f66ecb486a1536cb2f483ea51}{scalar}}(\textcolor{keywordtype}{size\_t} index) \textcolor{keyword}{const};}
\DoxyCodeLine{67 }
\DoxyCodeLine{68         \textcolor{keyword}{private}:}
\DoxyCodeLine{74             \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}... I>}
\DoxyCodeLine{75             LIBRAPID\_NODISCARD LIBRAPID\_ALWAYS\_INLINE Packet packetImpl(std::index\_sequence<I...>,}
\DoxyCodeLine{76                                                                         \textcolor{keywordtype}{size\_t} index) \textcolor{keyword}{const};}
\DoxyCodeLine{77 }
\DoxyCodeLine{83             \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}... I>}
\DoxyCodeLine{84             LIBRAPID\_NODISCARD LIBRAPID\_ALWAYS\_INLINE Scalar scalarImpl(std::index\_sequence<I...>,}
\DoxyCodeLine{85                                                                         \textcolor{keywordtype}{size\_t} index) \textcolor{keyword}{const};}
\DoxyCodeLine{86 }
\DoxyCodeLine{87             Functor m\_functor;}
\DoxyCodeLine{88             std::tuple<Args...> m\_args;}
\DoxyCodeLine{89         \};}
\DoxyCodeLine{90 }
\DoxyCodeLine{91         \textcolor{keyword}{template}<Descriptor desc, \textcolor{keyword}{typename} Functor, \textcolor{keyword}{typename}... Args>}
\DoxyCodeLine{92         \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function<desc, Functor, Args...>::Function}}(Functor \&\&functor, Args \&\&...args) :}
\DoxyCodeLine{93                 m\_functor(std::forward<Functor>(functor)), m\_args(std::forward<Args>(args)...) \{\}}
\DoxyCodeLine{94 }
\DoxyCodeLine{95         \textcolor{keyword}{template}<Descriptor desc, \textcolor{keyword}{typename} Functor, \textcolor{keyword}{typename}... Args>}
\DoxyCodeLine{96         \textcolor{keyword}{typename} \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}}<desc, Functor, Args...>::Packet}
\DoxyCodeLine{97         \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function_a8fb5be37c8760e2461877b5b6e5d5298}{Function<desc, Functor, Args...>::packet}}(\textcolor{keywordtype}{size\_t} index)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{98             \textcolor{keywordflow}{return} packetImpl(std::make\_index\_sequence<\textcolor{keyword}{sizeof}...(Args)>(), index);}
\DoxyCodeLine{99         \}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101         \textcolor{keyword}{template}<Descriptor desc, \textcolor{keyword}{typename} Functor, \textcolor{keyword}{typename}... Args>}
\DoxyCodeLine{102         \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}... I>}
\DoxyCodeLine{103         \textcolor{keyword}{typename} \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function}}<desc, Functor, Args...>::Packet}
\DoxyCodeLine{104         \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function<desc, Functor, Args...>::packetImpl}}(std::index\_sequence<I...>,}
\DoxyCodeLine{105                                                      \textcolor{keywordtype}{size\_t} index)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{106             \textcolor{keywordflow}{return} m\_functor.\mbox{\hyperlink{classlibrapid_1_1detail_1_1_function_a8fb5be37c8760e2461877b5b6e5d5298}{packet}}((std::get<I>(m\_args).packet(index))...);}
\DoxyCodeLine{107         \}}
\DoxyCodeLine{108 }
\DoxyCodeLine{109         \textcolor{keyword}{template}<Descriptor desc, \textcolor{keyword}{typename} Functor, \textcolor{keyword}{typename}... Args>}
\DoxyCodeLine{110         \textcolor{keyword}{auto} \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function_a3930166f66ecb486a1536cb2f483ea51}{Function<desc, Functor, Args...>::scalar}}(\textcolor{keywordtype}{size\_t} index) \textcolor{keyword}{const} -\/> Scalar \{}
\DoxyCodeLine{111             \textcolor{keywordflow}{return} scalarImpl(std::make\_index\_sequence<\textcolor{keyword}{sizeof}...(Args)>(), index);}
\DoxyCodeLine{112         \}}
\DoxyCodeLine{113 }
\DoxyCodeLine{114         \textcolor{keyword}{template}<Descriptor desc, \textcolor{keyword}{typename} Functor, \textcolor{keyword}{typename}... Args>}
\DoxyCodeLine{115         \textcolor{keyword}{template}<\textcolor{keywordtype}{size\_t}... I>}
\DoxyCodeLine{116         \textcolor{keyword}{auto} \mbox{\hyperlink{classlibrapid_1_1detail_1_1_function}{Function<desc, Functor, Args...>::scalarImpl}}(std::index\_sequence<I...>,}
\DoxyCodeLine{117                                                           \textcolor{keywordtype}{size\_t} index) \textcolor{keyword}{const} -\/> Scalar \{}
\DoxyCodeLine{118             \textcolor{keywordflow}{return} m\_functor((std::get<I>(m\_args).scalar(index))...);}
\DoxyCodeLine{119         \}}
\DoxyCodeLine{120     \} \textcolor{comment}{// namespace detail}}
\DoxyCodeLine{121 \} \textcolor{comment}{// namespace librapid}}
\DoxyCodeLine{122 }
\DoxyCodeLine{123 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// LIBRAPID\_ARRAY\_FUNCTION\_HPP}}

\end{DoxyCode}
